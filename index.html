<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button id="btn" value="Click me" type="submit">Click me</button>
</body>

</html>

<script>
    const btn = document.getElementById("btn");

    function sendData(data) {
      const XHR = new XMLHttpRequest();
            XHR.withCredentials = true;
      const FD = new FormData();

      FD.append("location_url", data);

      // Define what happens on successful data submission
      XHR.addEventListener("load", (event) => {
        alert("Yeah! Data sent and response loaded.");
        console.log(event);
      });

      // Define what happens in case of an error
      XHR.addEventListener("error", (event) => {
        alert("Oops! Something went wrong.");
      });

      // Set up our request
      XHR.open("POST", "http://sqr.co/api/links");

      XHR.setRequestHeader("Authorization", "Bearer 20383299e20dd56477d9dc0d84de7211");
      XHR.setRequestHeader("Content-Type", "multipart/form-data");
     

      XHR.send(FD);
    }

    btn.addEventListener("click", (e) => {
      e.preventDefault;
      sendData("https://www.twitter.com/")
      });

//     async function getUser() {
//         try {
//             const response = await fetch('https://sqr.co/api', { method: 'POST',

//                 headers: 
//                 {
//                     'X-Auth-Token': '20383299e20dd56477d9dc0d84de7211',
//                      withCredentials: true,    
//                      crossorigin: true,    
//                      mode: 'no-cors',     
//                 },
//         });

//     if (!response.ok) {

//         throw new Error(`Error! status: ${response.status}`);
//     }

//     const result = await response.json();

//     return result;} catch (err) {

//         console.log(err);
//     }

// }

//     btn.addEventListener('click', () => {
//         getUser();
//     });

</script>
